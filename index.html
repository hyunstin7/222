<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/reset_2.css">
    <link rel="stylesheet" href="./css/style.css">
    <title>Document</title>
</head>
<body>
    <header class="expand2"></header>
    <div id="container">
        <div id="sec1" draggable="true">
            <div class="slide-wrapper">
                <div class="slide">
                    <div class="slider-wrapper1 slider-wrapper">
                        <div class="slider slider1 contract-bg">
                        </div>
                    </div>
                    <div class="slider-wrapper2 slider-wrapper">
                        <div class="slider slider2">
                        </div>
                    </div>
                    <div class="slider-wrapper3 slider-wrapper">
                        <div class="slider slider3">
                        </div>
                    </div>
                </div>
                <div class="txt-slide">
                    <div class="txt-slider txt-slider1">
                        <h2 class="trans-txt">통증, 스마트에서 길을찾다<span>.</span></h2>
                        <p class="opa">이제 먼 길로 돌아가지 마세요. <br class="mo-br"> 스마트가 여러분의 건강을 책임집니다.</p>
                    </div>
                    <div class="txt-slider txt-slider2">
                        <h2>남다른 관점으로 <br class="mo-br">환자를 바라보는 <br>스마트 통증학과입니다<span>.</span></h2>
                        <p>신체 일부분이 아닌, 전체적인 관점에서 <br class="mo-br">바라보며 치료합니다.</p>
                    </div>
                    <div class="txt-slider txt-slider3">
                        <h2>정확한 원인 진단을 통해 <br>비수술부터 단계적으로 <br class="mo-br">시행합니다<span>.</span></h2>
                        <p>비수술 우선 치료를 원칙으로 <br class="mo-br">환자의 상태에 따른 맞춤치료를 제공합니다.</p>
                    </div>
                </div>
                <div class="slide-btn-wrapper">
                    <div class="num-wrapper">
                        <div class="num num1 num-color-base"></div>
                        <div class="num num2"></div>
                        <div class="num num3"></div>
                    </div>
                    <span class="play-btn">
                    </span>
                    <div class="slide-arrow">
                        <p><span class="left"></span> | <span class="right"></span></p>
                    </div>
                </div>
            </div>
            
        </div>
        <div id="sec2">
            <div class="sticky">
                <div class="sec2-list">
                <div class="img1-wrapper img-wrapper">
                    <a href="">
                        <img src="./img/Msection2_img01.png" alt="">
                        <img src="./img/Msection2_img01_hover_n.png" alt="">
                    </a>
                </div>
                <div class="img2-wrapper img-wrapper">
                    <a href="">
                        <img src="./img/Msection2_img02.png" alt="">
                        <img src="./img/Msection2_img02_hover_n.png" alt="">
                    </a>
                </div>
                <div class="direct-list">
                <div class="img3-wrapper img-wrapper">
                    <a href="">
                        <img src="./img/Msection2_img03.png" alt="">
                        <img src="./img/Msection2_img03_hover_n.png" alt="">
                    </a>
                </div>
                <div class="img4-wrapper img-wrapper">
                    <a href="">
                        <img src="./img/Msection2_img04.png" alt="">
                        <img src="./img/Msection2_img04_hover_n.png" alt="">
                    </a>
                </div>
                
                </div>
                <div class="last-list">
                    <div>
                    <h4>SMART <br>NETWORK</h4>
                    <p>스마트마취통증의학과는 <br class="mo-br">안양시 지역의 대표적인 <br>비수술 통증치료 네트워크 병원입니다.</p>
                    </div>
                    <div class="sec2-btn">
                        <a href="">
                            <img src="./img/Msection2_img04_btn.png" alt="">
                            <img src="./img/Msection2_img04_btntxt.png" alt="">
                        </a>
                    </div>
                </div>
                
            </div>
            <div class="list-progress-bar">
                <div class="inner-bar"></div>
            </div>
            <div class="fixed-txt"> 
                <p>WELCOME TO! <br>SMART PAIN CLINIC</p>
            </div>
            </div>
            
        </div>

        <div id="sec3">
            <div class="sticky">
                <div class="pc">
                <h4>스마트의<span><img src="./img/Msection3_img01.png" alt=""><img src="./img/Msection3_img01.png" alt=""></span>5가지 차별화 진료</h4>
                <h4>dd</h4>
                <h4>다름에는 이유가 <span><img src="./img/Msection3_img02.png" alt=""><img src="./img/Msection3_img02.png" alt=""></span>있습니다.</h4>
                </div>
                <div class="mo">
                    <h4>스마트의<span><img src="./img/Msection3_img01.png" alt=""><img src="./img/Msection3_img01.png" alt=""></span>5가지</h4>
                    <h4>차별화 진료 다름에는</h4>
                    <h4>이유가<span><img src="./img/Msection3_img02.png" alt=""><img src="./img/Msection3_img02.png" alt=""></span>있습니다.</h4>
                </div>
            </div>
        </div>
        <div id="sec4">
            <div class="list-wrapper">
                <div class="list list1">
                    <div class="img-wrapper img-wrapper1">
                        <img class="opa3" src="./img/Msection4_newImg01.jpg" alt="">
                        <div class="fake-bg fake-left"></div>
                    </div>
                    <div class="demon">
                        <h4>FIRST</h4>
                        <p>꼼꼼한 검사로 개인에 맞는 <br><span>체계적인 치료를 설계</span>합니다</p>
                        <button><a href="">꼼꼼한 검사 시스템</a></button>
                    </div>
                </div>
                <div class="list list2">
                    <div class="img-wrapper img-wrapper2">
                        <img class="opa3" src="./img/Msection4_newImg02.jpg" alt="">
                        <div class="fake-bg fake-right"></div>
                    </div>
                    <div class="demon">
                        <h4>FIRST</h4>
                        <p>꼼꼼한 검사로 개인에 맞는 <br><span>체계적인 치료를 설계</span>합니다</p>
                        <button><a href="">꼼꼼한 검사 시스템</a></button>
                    </div>
                </div>
                <div class="list list3">
                    <div class="img-wrapper img-wrapper3">
                        <img src="./img/Msection4_newImg03.jpg" alt="">
                        <div class="fake-bg"></div>
                    </div>
                    <div class="demon">
                        <h4>FIRST</h4>
                        <p>꼼꼼한 검사로 개인에 맞는 <br><span>체계적인 치료를 설계</span>합니다</p>
                        <button><a href="">꼼꼼한 검사 시스템</a></button>
                    </div>
                </div>
                <div class="list list4">
                    <div class="img-wrapper img-wrapper4">
                        <img src="./img/Msection4_newImg04.jpg" alt="">
                        <div class="fake-bg"></div>
                    </div>
                    <div class="demon">
                        <h4>FIRST</h4>
                        <p>꼼꼼한 검사로 개인에 맞는 <br><span>체계적인 치료를 설계</span>합니다</p>
                        <button><a href="">꼼꼼한 검사 시스템</a></button>
                    </div>
                </div>
                <div class="list list5">
                    <div class="img-wrapper img-wrapper5">
                        <img src="./img/Msection4_newImg05.jpg" alt="">
                        <div class="fake-bg"></div>
                    </div>
                    <div class="demon">
                        <h4>FIRST</h4>
                        <p>꼼꼼한 검사로 개인에 맞는 <br><span>체계적인 치료를 설계</span>합니다</p>
                        <button><a href="">꼼꼼한 검사 시스템</a></button>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <script src="./js/jquery-3.6.3.min.js"></script>
    <script>
        $(document).ready(() => {
                let latestscroll = 0;
                let sec1PlayBtn = true;
                let sec1AutoPlayBtn = true;
                //----스크롤 이벤트 시작----//
                $(window).scroll(() => {

                    // 스크롤값 //
                    let scrollY = (window).scrollY

                    
                    if($(window).innerWidth() <= 768){}else{
                        // 스크롤 업 헤더 안보이기 //
                        if (scrollY > latestscroll) {
                        $('header').removeClass('expand')
                        $('header').removeClass('expand2')
                        latestscroll = scrollY
                    } else {
                        // 스크롤 다운 헤더 보이기 //
                        latestscroll = scrollY
                        $('header').addClass('expand')
                    }
                    }
                    

                    // 스크롤이 sec1을 지나가는비율 //
                    let sec1Ratio = (scrollY - $('#sec1').offset().top) / $('#sec1').innerHeight() 

                    // 스크롤이 sec1을 지나고있을때의 sec1스케일값변동 //
                    sec1Ratio > 1 ? sec1Ratio = 1 : sec1Ratio < 0 ? sec1Ratio = 0 : sec1Ratio = sec1Ratio
                    sec1Ratio !== 0 ? $('#sec1 .slide-wrapper').css('background-color', '#f4f1ed') : $('#sec1 .slide-wrapper').css('background-color', '#e18317')
                    $('#sec1 .slide').css('transform', `scale(${1 - sec1Ratio * 0.15})`)

                    //sec2 //
                    
                    if($(window).innerWidth() > 768){
                        let sec2Ratio = (scrollY - $('#sec2').offset().top) / $('#sec2').innerHeight() 
                    sec2Ratio > 1 ? sec2Ratio = 1 : sec2Ratio < 0 ? sec2Ratio = 0 : $('#sec2 .fixed-txt').css('position','fixed')
                    sec2Ratio == 0 ? $('#sec2 .fixed-txt').css('position','absolute') : sec2Ratio == 1 ? $('#sec2 .fixed-txt').css('position','absolute') : null
                    $('#sec2 .sec2-list').css('transform',`translate3d(${-3300 * sec2Ratio * 2.5 }px,0,0)`)
                    }
                    
                    

                    // sec3 //

                    let sec3Ratio = (scrollY - $('#sec3').offset().top + $(window).innerHeight() * 0.4) / $('#sec3').innerHeight() ;
                    sec3Ratio > 1 ? sec3Ratio = 1 : sec3Ratio < -1 ? sec3Ratio = -1 : sec3Ratio = sec3Ratio
                    console.log(sec3Ratio)
                    if(sec3Ratio > 0){
                        $('#sec3 .sticky h4:first-child').addClass('bt50-1')
                        if($(window).innerWidth() <= 768){
                            $('#sec3 .sticky h4:nth-child(2)').addClass('bt50-3')
                        }
                        $('#sec3 .sticky h4:last-child').addClass('bt50-2')
                        $('#sec3 .sticky h4:first-child span img:last-child').addClass('scaleup-1')
                        $('#sec3 .sticky h4:last-child span img:last-child').addClass('scaleup-2')
                        
                    }else if(sec3Ratio <= -1){
                        $('#sec3 .sticky h4:first-child').removeClass('bt50-1')
                        $('#sec3 .sticky h4:first-child span img:last-child').removeClass('scaleup-1')
                        if($(window).innerWidth() <= 768){
                            $('#sec3 .sticky h4:nth-child(2)').removeClass('bt50-3')
                        }
                        $('#sec3 .sticky h4:last-child').removeClass('bt50-2')
                        $('#sec3 .sticky h4:last-child span img:last-child').removeClass('scaleup-2')
                    }

                    

                    let sec4List = [
                                    '#sec4 .list1',
                                    '#sec4 .list2',
                                    '#sec4 .list3',
                                    '#sec4 .list4',
                                    '#sec4 .list5'
                                ];
                      sec4List.forEach((a,i)=>{
                        let ratio = (scrollY - $(a).offset().top + $(window).innerHeight()*0.5)  / $(a).innerHeight()
                        let ratio2 = (scrollY - $(a).offset().top + $(window).innerHeight() * 0.8)  / $(a).innerHeight()
                        if($(window).innerWidth() <= 768){
                            ratio > 2 ? ratio = 2 : ratio < 0 ? ratio = 0 : $(`${a} .img-wrapper img`).css('transform',`translate3d(0,${60*ratio}px,0)`)
                        }else{
                            ratio > 2 ? ratio = 2 : ratio < 0 ? ratio = 0 : $(`${a} .img-wrapper img`).css('transform',`translate3d(0,${150*ratio}px,0)`)
                        }
                        ratio2 > 1 ? ratio2 = 1 : ratio2 < 0 ? ratio2 = ratio2 : ratio2 = ratio2;
                        if(ratio2 > 0){
                            $(`${a} .img-wrapper img`).addClass('opa3')
                            if((i+1) % 2 !== 0){
                                $(`${a} .fake-bg`).addClass('fake-left')
                                $(`${a} .demon`).addClass('rl50')
                            }else{
                                $(`${a} .fake-bg`).addClass('fake-right')
                                $(`${a} .demon`).addClass('lr50')
                            } 
                        }else if(ratio2 < -2){
                            $(`${a} .img-wrapper img`).removeClass('opa3')                            
                            if((i+1) % 2 !== 0){
                                $(`${a} .fake-bg`).removeClass('fake-left')
                                $(`${a} .demon`).removeClass('rl50')
                            }else{
                                $(`${a} .fake-bg`).removeClass('fake-right')
                                $(`${a} .demon`).removeClass('lr50')
                            } 
                        }
                      })              

                    
                    
                    

                })
                //----스크롤 이벤트 끝----//

                $('#sec2 .img-wrapper').mouseenter(function(){
                    $(this).children('a').children('img').css('opacity',0)
                    $(this).children('a').children('img:last-child').css('opacity',1)
                    $(this).css('background-color',"#2c2417")
                })

                $('#sec2 .img-wrapper').mouseleave(function(){
                    $(this).children('a').children('img').css('opacity',0)
                    $(this).children('a').children('img:first-child').css('opacity',1)
                    $(this).css('background-color',"#fff")
                })

                let i = 1;

                let RightBtn = () => {
                    if (sec1PlayBtn) {
                        i++;
                        if (i == 4) {
                            i = 1
                        }
                        $(`.slider`).removeClass('contract-bg')
                        $(`.slider${i}`).addClass('contract-bg')
                        $(`.txt-slider h2`).removeClass('trans-txt')
                        $(`.txt-slider${i} h2`).addClass('trans-txt')
                        $(`.txt-slider p`).removeClass('opa')
                        $(`.txt-slider${i} p`).addClass('opa')
                        $(`#sec1 .num`).removeClass('num-color')
                        $(`#sec1 .num`).removeClass('num-color-base')
                        $(`#sec1 .num${i}`).addClass('num-color')
                        sec1PlayBtn = false;
                        setTimeout(() => {
                            sec1PlayBtn = true
                        }, 500)
                    }
                }

                let LeftBtn = () => {
                    if (sec1PlayBtn) {
                        i--;
                        if (i == 0) {
                            i = 3
                        }
                        $(`.slider`).removeClass('contract-bg')
                        $(`.slider${i}`).addClass('contract-bg')
                        $(`.txt-slider h2`).removeClass('trans-txt')
                        $(`.txt-slider${i} h2`).addClass('trans-txt')
                        $(`.txt-slider p`).removeClass('opa')
                        $(`.txt-slider${i} p`).addClass('opa')
                        $(`#sec1 .num`).removeClass('num-color')
                        $(`#sec1 .num`).removeClass('num-color-base')
                        $(`#sec1 .num${i}`).addClass('num-color')
                        sec1PlayBtn = false;
                        setTimeout(() => {
                            sec1PlayBtn = true
                        }, 500)
                    }
                }

                let sec1AutoPlay = setInterval(() => {
                    RightBtn()
                }, 5000)

                $('#sec1 .play-btn').click(() => {
                    if (sec1AutoPlayBtn) {
                        $('#sec1 .play-btn').addClass('stop')
                        sec1AutoPlayBtn = false
                        clearInterval(sec1AutoPlay)
                    } else {
                        $('#sec1 .play-btn').removeClass('stop')
                        sec1AutoPlayBtn = true
                        sec1AutoPlay = setInterval(() => {
                            RightBtn()
                        }, 5000)
                    }
                })

                $('#sec1 .right').click(() => {
                    RightBtn()
                    if(sec1AutoPlayBtn){
                        clearInterval(sec1AutoPlay)
                    sec1AutoPlay = setInterval(() => {
                        RightBtn()
                    }, 5000)
                    }
                    
                })
                $('#sec1 .left').click(() => {
                    LeftBtn()
                    if(sec1AutoPlayBtn){
                        clearInterval(sec1AutoPlay)
                    sec1AutoPlay = setInterval(() => {
                        RightBtn()
                    }, 5000)
                    }
                        
                })
                let [x1, x2] = [0,0]
                $('#sec1').on('dragstart', (e) => {
                    console.log(1)
                    x1 = e.clientX
                })
                $('#sec1').on('dragend', (e) => {
                    console.log(2)
                    x2 = e.clientX

                    if (x2 - x1 > 0) {
                        RightBtn()
                        clearInterval(sec1AutoPlay)
                        sec1AutoPlay = setInterval(() => {
                            RightBtn()
                        }, 5000)
                    } else if (x2 - x1 < 0) {
                        LeftBtn()
                        clearInterval(sec1AutoPlay)
                        sec1AutoPlay = setInterval(() => {
                            RightBtn()
                        }, 5000)
                    }
                })
                $('#sec1').on('touchstart', (e) => {
                    x1 = e.touches[0].clientX
                })
                $('#sec1').on('touchend', (e) => {
                    x2 = e.changedTouches[0].clientX

                    if (x2 - x1 > 0) {
                        RightBtn()
                        clearInterval(sec1AutoPlay)
                        sec1AutoPlay = setInterval(() => {
                            RightBtn()
                        }, 5000)
                    } else if (x2 - x1 < 0) {
                        LeftBtn()
                        clearInterval(sec1AutoPlay)
                        sec1AutoPlay = setInterval(() => {
                            RightBtn()
                        }, 5000)
                    }
                })

                
            })
    </script>
    <script>
        $(document).ready(()=>{
            if($(window).innerWidth() <= 768){
                document.documentElement.style.setProperty('--dvh', `${$(window).innerHeight()/100}px`);


                let [x1,x2,X,K,T] = [0,0,0,0]
                $('.sec2-list').on('touchstart',function(e){
                    x1 = e.touches[0].clientX
                })

                $('.sec2-list').on('touchmove',function(e){
                    X = x1 - e.touches[0].clientX
                    T = X+K
                    T <= -294 ? T = -294 : T >= 1100 ? T = 1100 : T = T
                    let bar = T
                    bar < 0 ? bar = 0 : bar > 800 ? bar = 800 : bar = bar
                    let d = $('#sec2 .list-progress-bar').innerWidth() - $('#sec2 .inner-bar').innerWidth()
                    $('#sec2 .inner-bar').css('transition',`none`)
                    $('#sec2 .inner-bar').css('left',`${bar/800 * d}px`)
                    $(this).css('transition',`none`)
                    $(this).css('transform',`translate3d(${-T}px,0,0)`)
                })

                $('.sec2-list').on('touchend',function(e){
                    K += X;
                    K <= 0 ? K = 0 : K > 800 ? K = 800 : K = K
                    x2 = e.changedTouches[0].clientX
    
                    if(X >= 0){
                    if(K > 293*0.2 && K <= 293*1.2){
                        K = 293*1
                    }else if ( K > 293*1.2 && K < 293*2.2){
                        K = 293*2
                    }else if ( K > 293*2.2 && K < 293*3.2){
                        K = 293*3
                    }
                    }else{
                    if(K <= 293*0.8){
                        K = 293*0
                    }else if ( K > 293*0.8 && K < 293*1.8){
                        K = 293*1
                    }else if ( K > 293*1.8 && K < 293*3.2){
                        K = 293*2
                    }
                    }
                    let bar = K
                    bar < 0 ? bar = 0 : bar > 293*3 ? bar = 293*3 : bar = bar
                    let d = $('#sec2 .list-progress-bar').innerWidth() - $('#sec2 .inner-bar').innerWidth()
                    $('#sec2 .inner-bar').css('transition',`0.3s ease-out`)
                    $('#sec2 .inner-bar').css('left',`${bar/(293*3) * d}px`)
                    $(this).css('transition',`transform 0.3s ease-out`)
                    $(this).css('transform',`translate3d(${-K}px,0,0)`)

                })
            }
        })
    </script>
</body>
</html>